3.1.1 Token Buffering for In-Flight Correction
Token buffering is a technique used in modern LLM systems to improve the user experience in streaming applications. Our framework adapts this technique for a new purpose: enabling seamless content safety. As the large language model (LLM) generates new tokens the most recent b tokens are stored in a buffer (\mathtt{Buffer}(t) at time t) and are hidden from the user. This buffer acts as a staging area allowing us to perform rollback and intervention operations without the userâ€™s awareness. Tokens preceding the buffer are displayed to the user as part of the output stream denoted as \mathtt{Stream}(t). During the generation process the buffer is maintained using a sliding window mechanism which dynamically updates as new tokens are generated.